Bootstrap: docker
From: continuumio/miniconda3:24.1.2-0

%labels
    Author "Seirana"
    Description "Container for WESscDRS Nextflow pipeline"

%files
    ../env/requirements.txt /opt/WESscDRS/requirements.txt

%post
    # Basic setup
    apt-get update && apt-get install -y git && apt-get clean

    # Create a conda env (or use base)
    conda install -y python=3.11 pip
    pip install --no-cache-dir -r /opt/WESscDRS/requirements.txt

%environment
    export PATH=/opt/conda/bin:$PATH
    export LC_ALL=C
    export LANG=C

%runscript
    # Default: just exec whatever the user passes
    exec "$@"

