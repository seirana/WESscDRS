process DOWNLOAD_GDRIVE {
  tag "gdrive download"
  container "${params.container}"
  echo true
  ...
  shell:
  '''
  set -euo pipefail
  ...
  '''
}


profiles {
  // existing profiles (docker/standard) can stay, but you’ll use 'singularity'

  singularity {
    process.executor    = 'local'
    apptainer.enabled   = true          // or: singularity.enabled = true (older NF)
    docker.enabled      = false

    // Use the SIF you just built
    process.container   = "${projectDir}/containers/wes-scdrs.sif"

    // Optional: where Apptainer caches pulled images (if you reference docker://…)
    apptainer.cacheDir  = "${System.getenv('HOME')}/.apptainer"
  }
}

params {
  repo_url    = 'https://github.com/seirana/WESscDRS.git'
  branch      = 'main'
  run_args    = ''
  outdir      = 'results'
  container   = 'wes-scdrs:latest'

  // Google Drive defaults (can override)
  gdrive_url  = 'https://drive.google.com/file/d/1st4mJF1CORXlRX6mNQDDgz7VKn_IdzAt/view?usp=drive_link'
  gdrive_dest = 'data'
}

timeline {
  enabled = true
  file    = "timeline.html"
}
trace {
  enabled = true
  file    = "trace.txt"
}
report {
  enabled = true
  file    = "report.html"
}
dag {
  enabled = true
  file    = "flowchart.png"
}

